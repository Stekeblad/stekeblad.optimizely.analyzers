# SOA1023

## Unexpected base type for file extension

This analyzer tries to help you associate a file extension with
the correct media type class from Optimizely.

Optimizely comes with three abstract media type classes:
MediaData, ImageData, and VideoData. Both ImageData and VideoData
inherit from MediaData.

Using `ImageData` as the base type for uploaded images instead of `MediaData`
adds automatic thumbnail generation and display in the CMS, and provides other benefits.
`VideoData` is similar, but for video files.

This analyzer has internal lists of common file extensions for images, videos, and other files.
For each `MediaDescriptorAttribute`, it checks the base type of the decorated class
and compares the declared file extensions against the internal lists.
If there is a mismatch between an observed file extension and the expected base type,
a suggestion is generated.

## Example

This will trigger SOA1023:
```C#
	// pdf is not an image type
	[MediaDescriptor(ExtensionString = "pdf")]
	[ContentType(GUID = "01234567-89ab-bbbb-0123-456789abcdef")]
	public class ImageFile : EPiServer.Core.ImageData {}
```

Fix:
```C#
	[MediaDescriptor(ExtensionString = "png")] // was pdf
	[ContentType(GUID = "01234567-89ab-bbbb-0123-456789abcdef")]
	public class ImageFile : EPiServer.Core.ImageData {}

	// or

	[MediaDescriptor(ExtensionString = "pdf")]
	[ContentType(GUID = "01234567-89ab-bbbb-0123-456789abcdef")]
	public class ImageFile : EPiServer.Core.MediaData {} // was ImageData
	// WARNING: Be very careful when changing base type of existing content types
```

## Related analyzers

This analyzer is a part of a group of analyzers for the `MediaDescriptorAttribute` attribute

- [SOA1020 - Missing `MediaDescriptor`](https://github.com/Stekeblad/stekeblad.optimizely.analyzers/blob/master/doc/Analyzers/SOA1020.md)
- [SOA1021 - Unexpected usage of `MediaDescriptor`](https://github.com/Stekeblad/stekeblad.optimizely.analyzers/blob/master/doc/Analyzers/SOA1021.md)
- [SOA1022 - File extension associated with multiple content types](https://github.com/Stekeblad/stekeblad.optimizely.analyzers/blob/master/doc/Analyzers/SOA1022.md)
- [SOA1023 - Unexpected base type for extension](https://github.com/Stekeblad/stekeblad.optimizely.analyzers/blob/master/doc/Analyzers/SOA1023.md)
- [SOA1024 - Missing arguments on `MediaDescriptorAttribute`](https://github.com/Stekeblad/stekeblad.optimizely.analyzers/blob/master/doc/Analyzers/SOA1024.md)

## Read more

- [Developer documentation - Media types and templates](https://docs.developers.optimizely.com/content-management-system/docs/media-types-and-templates)
- [Class library - MediaData](https://world.optimizely.com/csclasslibraries/cms/EPiServer.Core.MediaData?version=12)
- [Class library - MediaDescriptorAttribute](https://world.optimizely.com/csclasslibraries/cms/EPiServer.Framework.DataAnnotations.MediaDescriptorAttribute?version=12)
